function arm_change_graph_type(r,e){jQuery(".armgraphtype_"+e).removeClass("selected"),jQuery("#armgraphtype_"+e+"_div_"+r).addClass("selected"),jQuery("#armgraphtype_"+e+"_"+r).prop("checked",!0),arm_change_graph(jQuery("#armgraphval_"+e).val(),e)}function arm_change_graph(r,a,e,t,_){(void 0===e||""==e||null==e||e<1)&&(e=1),void 0!==t&&""!=t&&null!=t||(t=!1),void 0!==_&&""!=_&&null!=_||(_="0"),jQuery("#armgraphval_"+a).val(r);var n,y=r,m=jQuery("input[name=armgraphtype_"+a+"]:checked").val(),p=jQuery("#arm_plan_filter").val(),l=jQuery("#arm_year_filter").val(),u="",o="",i="",h=jQuery("#arm_report_type").val(),j="",h=("payment_report"==h||"pay_per_post_report"==h?i=jQuery("#arm_gateway_filter").val():"coupon_report"==h&&(i=jQuery("#arm_gateway_filter").val(),j=jQuery("#arm_search_coupon").val()),"daily"==r?(o=jQuery("#arm_date_filter").val(),jQuery("#monthly_"+a+", #yearly_"+a).removeClass("active"),jQuery("#daily_"+a).addClass("active"),jQuery("#arm_year_filter_item").hide(),jQuery("#arm_month_filter_item").hide(),jQuery("#arm_date_filter_item").show()):"monthly"==r?(u=jQuery("#arm_month_filter").val(),jQuery("#daily_"+a+", #yearly_"+a).removeClass("active"),jQuery("#monthly_"+a).addClass("active"),jQuery("#arm_year_filter_item").show(),jQuery("#arm_month_filter_item").show(),jQuery("#arm_date_filter_item").hide()):"yearly"==r&&(jQuery("#monthly_"+a+", #daily_"+a).removeClass("active"),jQuery("#yearly_"+a).addClass("active"),jQuery("#arm_year_filter_item").show(),jQuery("#arm_month_filter_item").hide(),jQuery("#arm_date_filter_item").hide()),"armupdatecharts"),r=jQuery('input[name="arm_wp_nonce"]').val();if(1==t&&(h="armupdatereportgrid",n=jQuery(".armcharttitle").html(),n=new Date(n),"daily"==y?o=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate():"monthly"==y?(l=n.getFullYear(),u=n.getMonth()+1):l=n.getFullYear()),"1"==_)return 0<jQuery(".arm_members_table_container .arm_all_loginhistory_wrapper .form-table.arm_member_last_subscriptions_table tbody tr").length&&(jQuery(".arm_loading").show(),jQuery("#arm_report_analytics_form").attr("onsubmit","").attr("action","#").attr("method","post"),jQuery("input[name='is_export_to_csv']").val("1"),jQuery("input[name='current_page']").val(e),jQuery("input[name='gateway_filter']").val(i),jQuery("input[name='date_filter']").val(o),jQuery("input[name='month_filter']").val(u),jQuery("input[name='year_filter']").val(l),jQuery("input[name='plan_id']").val(p),jQuery("input[name='plan_type']").val(a),jQuery("input[name='graph_type']").val(m),jQuery("input[name='type']").val(y),jQuery("input[name='action']").val(h),jQuery("input[name='arm_export_report_data']").val("1"),jQuery("input[name='arm_search_coupon']").val(j),jQuery("#arm_report_analytics_form").submit(),jQuery("input[name='is_export_to_csv']").val("0"),jQuery("input[name='current_page']").val(""),jQuery("input[name='gateway_filter']").val(""),jQuery("input[name='date_filter']").val(""),jQuery("input[name='month_filter']").val(""),jQuery("input[name='year_filter']").val(""),jQuery("input[name='plan_id']").val(""),jQuery("input[name='plan_type']").val(""),jQuery("input[name='graph_type']").val(""),jQuery("input[name='type']").val(""),jQuery("input[name='action']").val(""),jQuery("input[name='arm_export_report_data']").val("0"),jQuery(".arm_loading").hide()),!1;jQuery.ajax({type:"POST",url:ajaxurl,beforeSend:function(){jQuery(".arm_loading").show()},data:"action="+h+"&type="+y+"&graph_type="+m+"&plan_type="+a+"&plan_id="+p+"&year_filter="+l+"&month_filter="+u+"&date_filter="+o+"&gateway_filter="+i+"&current_page="+e+"&arm_search_coupon="+j+"&_wpnonce="+r,success:function(r){var e;jQuery(".arm_loading").hide(),t?(e=r.split("[ARM_REPORT_SEPARATOR]"),"payment_history"==a?(jQuery(".arm_payments_table_body_content").html(e[0]),jQuery("#arm_payments_table_paging").html(e[1])):"pay_per_post_report"==a?(jQuery(".arm_pay_per_post_report_table_body_content").html(e[0]),jQuery("#arm_payments_table_paging").html(e[1])):"coupon_report"==a?(jQuery(".arm_coupon_report_table_body_content").html(e[0]),jQuery("#arm_coupon_report_table_paging").html(e[1])):(jQuery(".arm_members_table_body_content").html(e[0]),jQuery("#arm_members_table_paging").html(e[1]))):jQuery("#chart_container_"+a).html(r)}})}function arm_change_graph_pre(r,e,a){if(0==e)return!1;var t,_,n,y,m,p,e=jQuery("input[name=armgraphtype_"+a+"]:checked").val(),l=jQuery("#arm_plan_filter").val(),u=jQuery("#arm_year_filter").val(),o="",i="",h=jQuery('input[name="arm_wp_nonce"]').val();"payment_report"==jQuery("#arm_report_type").val()&&(i=jQuery("#arm_gateway_filter").val()),"yearly"==r?(u="",p=(t=jQuery("#"+r+"_"+a+" #current_year").val())-1,jQuery("#arm_year_filter_item .arm_year_filter:input").val(p),y=jQuery("#arm_year_filter_item").find('[data-value="'+p+'"]').html(),jQuery("#arm_year_filter_item").find("span").html(y),jQuery("#current_year").val(p),p="&new_year="+p):"monthly"==r?(o=jQuery("#arm_month_filter").val(),t=jQuery("#"+r+"_"+a+" #current_month").val(),n=jQuery("#"+r+"_"+a+" #current_month_year").val(),m=parseInt(t),n=parseInt(n),1==m?(n-=1,m=12):m-=1,jQuery("#arm_month_filter_item .arm_month_filter:input").val(m),_=jQuery("#arm_month_filter_item").find('[data-value="'+m+'"]').html(),jQuery("#arm_month_filter_item").find("span").html(_),jQuery("#arm_year_filter_item .arm_year_filter:input").val(n),y=jQuery("#arm_year_filter_item").find('[data-value="'+n+'"]').html(),jQuery("#arm_year_filter_item").find("span").html(y),jQuery("#"+r+"_"+a+" #current_month").val(m),jQuery("#"+r+"_"+a+" #current_month_year").val(n),p="&new_month="+m+"&new_month_year="+n):"daily"==r&&(t=jQuery("#"+r+"_"+a+" #current_day").val(),_=jQuery("#"+r+"_"+a+" #current_day_month").val(),y=jQuery("#"+r+"_"+a+" #current_day_year").val(),m=parseInt(t),n=parseInt(_),y=parseInt(y),m=1==t?(0==(n-=1)&&(n=12),new Date(y,n,0).getDate()):parseInt(t)-1,1==_&&1==t&&(y-=1),jQuery("#"+r+"_"+a+" #current_day").val(m),jQuery("#"+r+"_"+a+" #current_day_month").val(n),jQuery("#"+r+"_"+a+" #current_day_year").val(y),p="&new_day="+m+"&new_day_month="+n+"&new_day_year="+y),jQuery.ajax({type:"POST",url:ajaxurl,beforeSend:function(){jQuery(".arm_loading").show()},data:"action=armupdatecharts&type="+r+"&calculate=pre"+p+"&graph_type="+e+"&plan_type="+a+"&plan_id="+l+"&year_filter="+u+"&month_filter="+o+"&date_filter=&gateway_filter="+i+"&_wpnonce="+h,success:function(r){jQuery(".arm_loading").hide(),jQuery("#chart_container_"+a).html(r)}})}function arm_change_graph_next(r,e,a){if(0==e)return!1;var t,_,n,y,m,p,l,e=jQuery("input[name=armgraphtype_"+a+"]:checked").val(),u=jQuery("#arm_plan_filter").val(),o=jQuery("#arm_year_filter").val(),i="",h="",j=jQuery('input[name="arm_wp_nonce"]').val();"payment_report"==jQuery("#arm_report_type").val()&&(h=jQuery("#arm_gateway_filter").val()),"yearly"==r?(o="",t=jQuery("#"+r+"_"+a+" #current_year").val(),l=parseInt(t)+1,jQuery("#arm_year_filter_item .arm_year_filter:input").val(l),y=jQuery("#arm_year_filter_item").find('[data-value="'+l+'"]').html(),jQuery("#arm_year_filter_item").find("span").html(y),jQuery("#"+r+"_"+a+" #current_year").val(l),l="&new_year="+l):"monthly"==r?(i=jQuery("#arm_month_filter").val(),t=jQuery("#"+r+"_"+a+" #current_month").val(),p=jQuery("#"+r+"_"+a+" #current_month_year").val(),m=parseInt(t),p=parseInt(p),12==m?(p+=1,m=1):m+=1,jQuery("#arm_month_filter_item .arm_month_filter:input").val(m),_=jQuery("#arm_month_filter_item").find('[data-value="'+m+'"]').html(),jQuery("#arm_month_filter_item").find("span").html(_),jQuery("#arm_year_filter_item .arm_year_filter:input").val(p),y=jQuery("#arm_year_filter_item").find('[data-value="'+p+'"]').html(),jQuery("#arm_year_filter_item").find("span").html(y),jQuery("#"+r+"_"+a+" #current_month").val(m),jQuery("#"+r+"_"+a+" #current_month_year").val(p),l="&new_month="+m+"&new_month_year="+p):"daily"==r&&(t=jQuery("#"+r+"_"+a+" #current_day").val(),_=jQuery("#"+r+"_"+a+" #current_day_month").val(),y=jQuery("#"+r+"_"+a+" #current_day_year").val(),m=parseInt(t),p=parseInt(_),y=parseInt(y),m=t==(n=new Date(y,p,0).getDate())?(p+=1,1):parseInt(t)+1,12==_&&t==n&&(y+=1,p=m=1),jQuery("#"+r+"_"+a+" #current_day").val(m),jQuery("#"+r+"_"+a+" #current_day_month").val(p),jQuery("#"+r+"_"+a+" #current_day_year").val(y),l="&new_day="+m+"&new_day_month="+p+"&new_day_year="+y),jQuery.ajax({type:"POST",url:ajaxurl,beforeSend:function(){jQuery(".arm_loading").show()},data:"action=armupdatecharts&type="+r+"&calculate=next"+l+"&graph_type="+e+"&plan_type="+a+"&plan_id="+u+"&year_filter="+o+"&month_filter="+i+"&date_filter=&gateway_filter="+h+"&_wpnonce="+j,success:function(r){jQuery(".arm_loading").hide(),jQuery("#chart_container_"+a).html(r)}})}function arm_change_login_hisotry_report(r){jQuery("#arm_login_history_type").val(r),jQuery(".btn_chart_type").removeClass("active"),jQuery("#"+r).addClass("active"),jQuery(".arm_login_history_page_search_btn").trigger("click")}jQuery(document).ready(function(){var r,e=jQuery("#arm_report_type").val();jQuery("#armgraphval_members").val(),jQuery("#armgraphval_members_plan").val(),jQuery("#armgraphval_payment_history").val();"member_report"==e?arm_change_graph(jQuery("#armgraphval_members").val(),"members"):"payment_report"==e?arm_change_graph(jQuery("#armgraphval_payment_history").val(),"payment_history"):"pay_per_post_report"==e?arm_change_graph(jQuery("#armgraphval_pay_per_post_report").val(),"pay_per_post_report"):"coupon_report"==e&&arm_change_graph(jQuery("#armgraphval_coupon_report").val(),"coupon_report"),jQuery.isFunction(jQuery().datetimepicker)&&(r=new Date,jQuery(".arm_datepicker_filter").datetimepicker({defaultDate:r,useCurrent:!1,format:"YYYY-MM-DD"})),jQuery("#arm_report_export_button").on("click",function(){var r="1";"member_report"==e?0<jQuery("tbody.arm_members_table_body_content tr").length&&jQuery("tbody.arm_members_table_body_content tr .arm_report_grid_no_data").length<=0&&arm_change_graph(jQuery("#armgraphval_members").val(),"members","","",r):"payment_report"==e?0<jQuery("tbody.arm_payments_table_body_content tr").length&&jQuery("tbody.arm_payments_table_body_content tr .arm_report_grid_no_data").length<=0&&arm_change_graph(jQuery("#armgraphval_payment_history").val(),"payment_history","","",r):"pay_per_post_report"==e?0<jQuery("tbody.arm_pay_per_post_report_table_body_content tr").length&&jQuery("tbody.arm_pay_per_post_report_table_body_content tr .arm_report_grid_no_data").length<=0&&arm_change_graph(jQuery("#armgraphval_pay_per_post_report").val(),"pay_per_post_report","","",r):"coupon_report"==e&&0<jQuery("tbody.arm_coupon_report_table_body_content tr").length&&jQuery("tbody.arm_coupon_report_table_body_content tr .arm_report_grid_no_data").length<=0&&arm_change_graph(jQuery("#armgraphval_coupon_report").val(),"coupon_report","","",r)})}),jQuery(document).on("click","#arm_report_apply_filter_button",function(){var r=jQuery("#arm_report_type").val();jQuery("#armgraphval_members").val(),jQuery("#armgraphval_members_plan").val(),jQuery("#armgraphval_payment_history").val();"member_report"==r?arm_change_graph(jQuery("#armgraphval_members").val(),"members"):"payment_report"==r?arm_change_graph(jQuery("#armgraphval_payment_history").val(),"payment_history"):"pay_per_post_report"==r?arm_change_graph(jQuery("#armgraphval_pay_per_post_report").val(),"pay_per_post_report"):"coupon_report"==r&&arm_change_graph(jQuery("#armgraphval_coupon_report").val(),"coupon_report")}),jQuery(document).on("click",".arm_report_analytics_content .arm_page_numbers:not(.dots)",function(){var r=jQuery("#arm_report_type").val(),e=jQuery(this).attr("data-page");"member_report"==r?arm_change_graph(arm_graph_type=jQuery("#armgraphval_members").val(),"members",e,!0):"payment_report"==r?arm_change_graph(arm_graph_type=jQuery("#armgraphval_payment_history").val(),"payment_history",e,!0):"pay_per_post_report"==r?arm_change_graph(arm_graph_type=jQuery("#armgraphval_pay_per_post_report").val(),"pay_per_post_report",e,!0):"coupon_report"==r&&arm_change_graph(arm_graph_type=jQuery("#armgraphval_coupon_report").val(),"coupon_report",e,!0)});